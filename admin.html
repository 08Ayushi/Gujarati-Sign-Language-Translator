<!-- ¬© 2025 SIGNMitra Team: Dev Shah, Ayushi Soni, Maitriba Jadeja, Vishwa Joshi -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignMitra - Admin Panel</title>
    <style>
        :root {
            --primary-color: #235185;
            --secondary-color: #768ed7;
            --accent-color: #2c3557;
            --light-color: #f8f8f8;
            --text-color: #333;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
            --danger-color: #F44336;
            --info-color: #2196F3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Header Styling */
        header {
            background-color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .container {
            width: 95%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 20px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--secondary-color);
        }

        .logout-btn {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: 600;
            transition: background-color 0.3s ease;
            text-decoration: none;
        }

        .logout-btn:hover {
            background-color: rgb(163, 216, 228);
            color: #201f42;
        }

        /* Admin Layout */
        .admin-container {
            display: flex;
            min-height: calc(100vh - 72px);
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: white;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.05);
            padding: 20px 0;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            margin-bottom: 5px;
        }

        .sidebar-link {
            display: block;
            padding: 12px 20px;
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .sidebar-link:hover, .sidebar-link.active {
            background-color: rgba(118, 142, 215, 0.1);
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        .sidebar-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 25px;
            background-color: var(--light-color);
        }

        .page-title {
            margin-bottom: 25px;
            color: var(--primary-color);
            font-size: 24px;
            font-weight: 700;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-color);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background-color: rgba(118, 142, 215, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: var(--primary-color);
            font-size: 18px;
        }

        .card-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .card-label {
            color: #777;
            font-size: 14px;
        }

        /* Tabs for Data Management and System Management */
        .tab-container {
            margin-bottom: 30px;
        }

        .tabs {
            display: flex;
            background-color: white;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
        }

        .tab {
            padding: 15px 20px;
            cursor: pointer;
            background-color: #e8e8e8;
            border: none;
            flex: 1;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab.active {
            background-color: white;
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .tab-content {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .tab-content.active {
            display: block;
        }

        /* Form Styling */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--secondary-color);
            outline: none;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        /* Button Styling */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: #e8e8e8;
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background-color: #d0d0d0;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #3e8e41;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d32f2f;
        }

        /* Table Styling */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        table th {
            background-color: #f9f9f9;
            font-weight: 600;
        }

        table tr:hover {
            background-color: #f5f5f5;
        }

        .action-btns {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .edit-btn {
            background-color: var(--info-color);
            color: white;
        }

        .delete-btn {
            background-color: var(--danger-color);
            color: white;
        }

        /* System Status */
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active {
            background-color: var(--success-color);
        }

        .status-warning {
            background-color: var(--warning-color);
        }

        .status-inactive {
            background-color: var(--danger-color);
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: var(--primary-color);
        }

        /* File Upload */
        .file-upload {
            border: 2px dashed #ddd;
            padding: 25px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            border-color: var(--secondary-color);
        }

        .file-upload i {
            font-size: 40px;
            color: #aaa;
            margin-bottom: 15px;
        }

        .file-upload p {
            margin: 0;
            color: #777;
        }

        input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="home.html" class="logo">SignMitra Admin</a>
                <ul class="nav-links">
                    <li><a href="home.html">Home</a></li>
                    <li><a href="SiGML-Player-gui1.html">Translator</a></li>
                    <li><a href="#" class="logout-btn">Logout</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <a href="#dashboard" class="sidebar-link active" onclick="showSection('dashboard')">
                        <i>üìä</i> Dashboard
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#data-management" class="sidebar-link" onclick="showSection('data-management')">
                        <i>üóÉÔ∏è</i> Data Management
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#system-management" class="sidebar-link" onclick="showSection('system-management')">
                        <i>‚öôÔ∏è</i> System Management
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#users" class="sidebar-link" onclick="showSection('users')">
                        <i>üë•</i> User Management
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#settings" class="sidebar-link" onclick="showSection('settings')">
                        <i>‚öôÔ∏è</i> Settings
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="admin-section active">
                <h2 class="page-title">Dashboard</h2>

                <div class="dashboard-cards">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Total Gujarati Words</div>
                            <div class="card-icon">üìù</div>
                        </div>
                        <div class="card-value" id="total-words">‚Ä¶</div>
                        <div class="card-label">Words in database</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Total SiGML Signs</div>
                            <div class="card-icon">üëê</div>
                        </div>
                        <div class="card-value" id="total-signs">‚Ä¶</div>
                        <div class="card-label">Sign mappings</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">System Status</div>
                            <div class="card-icon">üîÑ</div>
                        </div>
                        <div class="card-value"><span class="status-indicator status-active"></span> Active</div>
                        <div class="card-label">All systems operational</div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Avatar Model</div>
                            <div class="card-icon">ü§ñ</div>
                        </div>
                        <div class="card-value">v2.1.3</div>
                        <div class="card-label">Current version</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Recent Activity</div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Action</th>
                                    <th>User</th>
                                    <th>Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Apr 14, 2025</td>
                                    <td>Added word</td>
                                    <td>admin@signmitra.com</td>
                                    <td>Added "‡™∏‡™´‡™∞‡™ú‡™®" (Apple) with corresponding SiGML</td>
                                </tr>
                                <tr>
                                    <td>Apr 13, 2025</td>
                                    <td>System update</td>
                                    <td>system</td>
                                    <td>Avatar rendering engine updated to v2.1.3</td>
                                </tr>
                                <tr>
                                    <td>Apr 12, 2025</td>
                                    <td>Modified word</td>
                                    <td>admin@signmitra.com</td>
                                    <td>Updated SiGML for "‡™∂‡™æ‡™≥‡™æ" (School)</td>
                                </tr>
                                <tr>
                                    <td>Apr 11, 2025</td>
                                    <td>Data backup</td>
                                    <td>system</td>
                                    <td>Automatic scheduled backup completed</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Data Management Section -->
            <section id="data-management" class="admin-section">
                <h2 class="page-title">Data Management</h2>

                <div class="tab-container">
                    <div class="tabs">
                        <button class="tab active" onclick="openTab(event, 'data-review')">Data Review</button>
                        <button class="tab" onclick="openTab(event, 'data-update')">Data Update</button>
                    </div>

                    <!-- ‚Ä¶ up above, your tabs ‚Ä¶ -->
<div id="data-review" class="tab-content active">
    <div class="form-row" style="margin-bottom:1rem;">
      <input
        id="search-input"
        type="text"
        class="form-control"
        placeholder="Search words‚Ä¶"
        style="flex:1;"
      />
      <select
        id="category-filter"
        class="form-control"
        style="width:200px; margin-left:1rem;"
      >
        <option value="">All Categories</option>
        <option value="animals">Animals</option>
        <option value="colors">Colors</option>
        <option value="food">Food</option>
        <option value="vyakaran">Grammar</option>
        <option value="numbers">Numbers</option>
        <option value="objects">Objects</option>
        <option value="signs">Signs</option>
      </select>
      <button
        id="search-btn"
        class="btn btn-primary"
        style="margin-left:1rem;"
      >Search</button>
    </div>
  
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Gujarati Word</th>
            <th>Category</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="data-review-body">
          <!-- rows injected here -->
        </tbody>
      </table>
    </div>
  
    <div class="pagination-controls" style="text-align:center; margin-top:1rem;">
      <button id="prev-btn" class="btn btn-secondary">Previous</button>
      <span id="page-indicator" style="margin:0 1rem;">Page¬†1¬†of¬†1</span>
      <button id="next-btn" class="btn btn-secondary">Next</button>
    </div>
  </div>

                    <div id="data-update" class="tab-content">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Choose Action</label>
                                <select class="form-control" id="update-action">
                                    <option value="add">Add New Word</option>
                                    <option value="bulk">Bulk Import</option>
                                </select>
                            </div>
                        </div>

                        <div id="add-word-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Gujarati Word</label>
                                    <input type="text" class="form-control" placeholder="Enter Gujarati word">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">English Meaning</label>
                                    <input type="text" class="form-control" placeholder="Enter English meaning">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Category</label>
                                    <select class="form-control">
                                        <option value="daily">Daily Usage</option>
                                        <option value="education">Education</option>
                                        <option value="health">Health</option>
                                        <option value="emergency">Emergency</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Priority</label>
                                    <select class="form-control">
                                        <option value="high">High</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="low">Low</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">SiGML Code</label>
                                <textarea class="form-control" rows="6" placeholder="Enter or generate SiGML code"></textarea>
                            </div>

                            <div style="margin-top: 20px;">
                                <button class="btn btn-success">Generate SiGML</button>
                                <button class="btn btn-primary" style="margin-left: 10px;">Save Word</button>
                                <button class="btn btn-secondary" style="margin-left: 10px;">Cancel</button>
                            </div>
                        </div>

                        <div id="bulk-import-form" style="display: none;">
                            <div class="form-group">
                                <label class="form-label">Import Method</label>
                                <select class="form-control">
                                    <option value="csv">CSV File</option>
                                    <option value="json">JSON File</option>
                                    <option value="api">External API</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Upload File</label>
                                <div class="file-upload">
                                    <i>üìÅ</i>
                                    <p>Drag & drop your file here or click to browse</p>
                                    <input type="file" id="file-upload" accept=".csv, .json">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Options</label>
                                <div style="margin-top: 10px;">
                                    <label style="margin-right: 20px;">
                                        <input type="checkbox" checked> Skip duplicates
                                    </label>
                                    <label style="margin-right: 20px;">
                                        <input type="checkbox" checked> Auto-generate SiGML
                                    </label>
                                    <label>
                                        <input type="checkbox"> Override existing entries
                                    </label>
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <button class="btn btn-primary">Import Data</button>
                                <button class="btn btn-secondary" style="margin-left: 10px;">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Management Section -->
            <section id="system-management" class="admin-section">
                <h2 class="page-title">System Management</h2>

                <div class="tab-container">
                    <div class="tabs">
                        <button class="tab active" onclick="openTab(event, 'system-operation')">System Operation</button>
                        <button class="tab" onclick="openTab(event, 'system-maintenance')">System Maintenance</button>
                    </div>

                    <div id="system-operation" class="tab-content active">
                        <div class="dashboard-cards">
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Server Status</div>
                                </div>
                                <div class="card-value"><span class="status-indicator status-active"></span> Online</div>
                                <div class="card-label">Last checked: Today, 12:45 PM</div>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-primary">Refresh Status</button>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Database Connection</div>
                                </div>
                                <div class="card-value"><span class="status-indicator status-active"></span> Connected</div>
                                <div class="card-label">Response time: 42ms</div>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-primary">Test Connection</button>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">Avatar Engine</div>
                                </div>
                                <div class="card-value"><span class="status-indicator status-active"></span> Running</div>
                                <div class="card-label">Uptime: 7 days, 5 hours</div>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-primary">Restart Engine</button>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">API Service</div>
                                </div>
                                <div class="card-value"><span class="status-indicator status-warning"></span> Degraded</div>
                                <div class="card-label">High latency detected</div>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-primary">View Logs</button>
                                </div>
                            </div>
                        </div>

                        <div class="card" style="margin-top: 30px;">
                            <div class="card-header">
                                <div class="card-title">System Resources</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>CPU Usage</span>
                                    <span>42%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 42%;"></div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Memory Usage</span>
                                    <span>65%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 65%;"></div>
                                </div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Disk Space</span>
                                    <span>28%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 28%;"></div>
                                </div>
                            </div>
                            
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>Network Bandwidth</span>
                                    <span>15%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress" style="width: 15%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                                            <!-- System Maintenance Tab Content -->
                        <div id="system-maintenance" class="tab-content">
                            <div class="dashboard-cards">
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Backup Database</div>
                                    </div>
                                    <div style="margin-top: 15px; text-align: center;">
                                        <button class="btn btn-primary">Run Backup</button>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Clear Cache</div>
                                    </div>
                                    <div style="margin-top: 15px; text-align: center;">
                                        <button class="btn btn-warning">Clear Now</button>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title">Update System</div>
                                    </div>
                                    <div style="margin-top: 15px; text-align: center;">
                                        <button class="btn btn-secondary">Check for Updates</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- User Management Section -->
                <section id="users" class="admin-section">
                    <h2 class="page-title">User Management</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>User ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>u001</td>
                                    <td>Amit Patel</td>
                                    <td>amit@signmitra.com</td>
                                    <td>Admin</td>
                                    <td><span class="status-indicator status-active"></span> Active</td>
                                    <td class="action-btns">
                                        <button class="action-btn edit-btn">Edit</button>
                                        <button class="action-btn delete-btn">Delete</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>u002</td>
                                    <td>Rina Desai</td>
                                    <td>rina@signmitra.com</td>
                                    <td>Editor</td>
                                    <td><span class="status-indicator status-inactive"></span> Inactive</td>
                                    <td class="action-btns">
                                        <button class="action-btn edit-btn">Edit</button>
                                        <button class="action-btn delete-btn">Delete</button>
                                    </td>
                                </tr>
                                <!-- Add more users here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="admin-section">
                    <h2 class="page-title">Settings</h2>
                    <form>
                        <div class="form-group">
                            <label class="form-label">Site Title</label>
                            <input type="text" class="form-control" value="SignMitra Admin">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Default Language</label>
                            <select class="form-control">
                                <option value="en" selected>English</option>
                                <option value="gu">Gujarati</option>
                                <!-- more languages -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Enable Notifications</label>
                            <input type="checkbox" checked>
                        </div>
                        <button type="submit" class="btn btn-success">Save Settings</button>
                    </form>
                </section>
            </div> <!-- end .admin-container -->

    <!-- JavaScript for sidebar and tabs -->
    <script>
        let allWords      = [];
  let filteredWords = [];
  let currentPage   = 1;
  const pageSize    = 10;

  async function loadDictionary() {
    try {
      const res = await fetch("/api/words");
      if (!res.ok) throw new Error(await res.text());
      const { words } = await res.json();
      // words: [{ word: "...", category: "vyakaran", updatedAt: ... }, ‚Ä¶]
  
      // normalize exactly like above
      allWords = words.map(w => ({
        word: Array.isArray(w.word) ? w.word.join("") : String(w.word),
        category: w.category
      }));
  
      applyFilter();
    } catch (err) {
      console.error("Failed to load dictionary:", err);
    }
  }
  

  function renderPage() {
    const tbody = document.getElementById("data-review-body");
    tbody.innerHTML = "";

    const totalPages = Math.ceil(filteredWords.length / pageSize) || 1;
    const start = (currentPage - 1) * pageSize;
    const slice = filteredWords.slice(start, start + pageSize);

    slice.forEach((item, idx) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${start + idx + 1}</td>
        <td>${item.word}</td>
        <td>${item.category}</td>
        <td class="action-btns">
          <button class="action-btn edit-btn">Edit</button>
          <button class="action-btn delete-btn">Delete</button>
        </td>`;
      tbody.appendChild(tr);
    });

    document.getElementById("page-indicator").textContent =
      `Page¬†${currentPage}¬†of¬†${totalPages}`;
    document.getElementById("prev-btn").disabled = currentPage <= 1;
    document.getElementById("next-btn").disabled = currentPage >= totalPages;
  }

  function applyFilter() {
    const term = document.getElementById("search-input").value.toLowerCase();
    const cat  = document.getElementById("category-filter").value;
  
    filteredWords = allWords.filter(item => {
      // 1Ô∏è‚É£ ensure `w` is always a string
      let w = item.word;
      if (Array.isArray(w)) {
        w = w.join("");           // ['‡™ï','‡™æ'] ‚Üí "‡™ï‡™æ"
      } else if (typeof w !== "string") {
        w = String(w);            // anything else ‚Üí "‚Ä¶"
      }
  
      // 2Ô∏è‚É£ now it‚Äôs safe to lowercase & search
      const matchWord = w.toLowerCase().includes(term);
      const matchCat  = !cat || item.category === cat;
      return matchWord && matchCat;
    });
  
    currentPage = 1;
    renderPage();
  }
  

  document.addEventListener("DOMContentLoaded", () => {
    loadDictionary();

    document.getElementById("prev-btn")
      .addEventListener("click", () => { currentPage--; renderPage(); });

    document.getElementById("next-btn")
      .addEventListener("click", () => { currentPage++; renderPage(); });

    document.getElementById("search-btn")
      .addEventListener("click", applyFilter);

    document.getElementById("search-input")
      .addEventListener("keyup", e => {
        if (e.key === "Enter") applyFilter();
      });

    document.getElementById("category-filter")
      .addEventListener("change", applyFilter);
  });
        async function loadSignCount() {
            try {
              const res = await fetch('/api/total-sigml-signs');
              if (!res.ok) throw new Error(await res.text());
              const { totalSigns } = await res.json();
              document.getElementById('total-signs').textContent = totalSigns;
            } catch(err) {
              console.error('Could not load sign count:', err);
            }
          }
          document.addEventListener('DOMContentLoaded', () => {
            loadWordCount();      // your existing word loader
            loadSignCount();      // call this new one
          });
          
            async function loadWordCount() {
              try {
                const res = await fetch('/api/all-words');
                if (!res.ok) throw new Error(await res.text());
                const { total } = await res.json();
                document.getElementById('total-words').textContent = total;
              } catch (err) {
                console.error('Could not load word count:', err);
              }
            }
          
            // when page is ready, fetch & display
            document.addEventListener('DOMContentLoaded', loadWordCount);
          
        function showSection(sectionId) {
            // hide all sections
            document.querySelectorAll('.admin-section').forEach(sec => sec.classList.remove('active'));
            // deactivate all sidebar links
            document.querySelectorAll('.sidebar-link').forEach(link => link.classList.remove('active'));
            // show selected section
            document.getElementById(sectionId).classList.add('active');
            // mark corresponding link active
            const link = document.querySelector('.sidebar-link[href="#' + sectionId + '"]');
            if (link) link.classList.add('active');
        }

        function openTab(evt, tabName) {
            const container = evt.target.closest('.tab-container');
            // hide all tab contents in this container
            container.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
            // deactivate all tabs
            container.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            // activate clicked tab and its content
            container.querySelector('#' + tabName).classList.add('active');
            evt.target.classList.add('active');
        }
    </script>
</body>
</html>
