<!-- ┬й 2025 SIGNMitra Team: Dev Shah, Ayushi Soni, Maitriba Jadeja, Vishwa Joshi -->
<!DOCTYPE html>
<html lang="gu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SignMitra - Gujarati Keyboard</title>

  <script src="https://www.gstatic.com/inputtools/js/ita/inputtools.js"></script>
  <link rel="stylesheet" href="cwa/cwasa.css" />
  <link rel="stylesheet" href="cwa/cwapp.css" />
  <script src="cwa/allcsa.js"></script>


  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: sans-serif;
      background: #f8f8f8;
    }

    h1 {
      color: #235185;
      text-align: center;
      font-weight: bolder;
    }

    #avatar-container {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 50vh;
      background: white;
    }

    #input-section {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: center;
      background: white;
      padding: 10px;
      margin: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    #glossInput {
      flex: 1 1 200px;
      min-width: 60%;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    button {
      padding: 10px;
      font-size: 18px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      background-color: #2c3557;
      color: white;
      width: 45px;
      height: 45px;
    }

    button:hover {
      background-color: #768ed7;
      color: black;
    }

    #gujaratiKeyboard {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 6px;
      padding: 10px;
      margin: 10px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    #gujaratiKeyboard button {
      background-color: #b8bfd1;
      color: black;
      border: 1px solid #ccc;
      border-radius: 6px;
      cursor: pointer;
      width: 10vw;
      height: 10vw;
      max-width: 50px;
      max-height: 50px;
      font-size: 16px;
    }

    #gujaratiKeyboard button:hover {
      background-color: #768ed7;
    }

    @media (max-width: 600px) {
      #avatar-container {
        height: 35vh;
      }

      #glossInput {
        min-width: 100%;
      }

      #gujaratiKeyboard button {
        font-size: 14px;
        width: 12vw;
        height: 12vw;
      }
    }
  </style>
</head>

<body onload="CWASA.init();">

 

  <h1>SignMitra</h1>
  <div class="CWASAAvatar av0" style="width:400px; height:400px;"></div>
  <textarea class="txtaSiGMLText av0" style="display:none;">
    <sigml><hns_sign gloss="hello"><hns_handconfig handshape="flat" palmor="down"/></hns_sign></sigml>
  </textarea>
  <button onclick="document.querySelector('.bttnPlaySiGMLText').click()">Play Hello</button>
  <!-- <div id="avatar-container">
    <div class="CWASAAvatar av0" style="width:100%; height:100%; background:#fff;"></div>
  </div> -->

  <div id="input-section">
    <input type="text" id="glossInput" placeholder="Type in Gujarati using English..." />
    <button id="micBtn" onclick="startSpeechRecognition()">ЁЯОд</button>
    <button id="playBtn" class="bttnPlaySiGMLText av0">тЦ╢</button>
  </div>

  <!-- Gujarati Keyboard Layout -->
<div id="gujaratiKeyboard">
  <!-- Vowels -->
  <button onclick="insertChar('ркЕ')">ркЕ</button>
  <button onclick="insertChar('ркЖ')">ркЖ</button>
  <button onclick="insertChar('ркЗ')">ркЗ</button>
  <button onclick="insertChar('ркИ')">ркИ</button>
  <button onclick="insertChar('ркЙ')">ркЙ</button>
  <button onclick="insertChar('ркК')">ркК</button>
  <button onclick="insertChar('ркП')">ркП</button>
  <button onclick="insertChar('ркР')">ркР</button>
  <button onclick="insertChar('ркУ')">ркУ</button>
  <button onclick="insertChar('ркФ')">ркФ</button>

  <!-- Consonants -->
  <button onclick="insertChar('ркХ')">ркХ</button>
  <button onclick="insertChar('ркЦ')">ркЦ</button>
  <button onclick="insertChar('ркЧ')">ркЧ</button>
  <button onclick="insertChar('ркШ')">ркШ</button>
  <button onclick="insertChar('ркЩ')">ркЩ</button>

  <button onclick="insertChar('ркЪ')">ркЪ</button>
  <button onclick="insertChar('ркЫ')">ркЫ</button>
  <button onclick="insertChar('ркЬ')">ркЬ</button>
  <button onclick="insertChar('ркЭ')">ркЭ</button>
  <button onclick="insertChar('ркЮ')">ркЮ</button>

  <button onclick="insertChar('ркЯ')">ркЯ</button>
  <button onclick="insertChar('рка')">рка</button>
  <button onclick="insertChar('ркб')">ркб</button>
  <button onclick="insertChar('ркв')">ркв</button>
  <button onclick="insertChar('ркг')">ркг</button>

  <button onclick="insertChar('ркд')">ркд</button>
  <button onclick="insertChar('рке')">рке</button>
  <button onclick="insertChar('ркж')">ркж</button>
  <button onclick="insertChar('ркз')">ркз</button>
  <button onclick="insertChar('рки')">рки</button>

  <button onclick="insertChar('ркк')">ркк</button>
  <button onclick="insertChar('ркл')">ркл</button>
  <button onclick="insertChar('ркм')">ркм</button>
  <button onclick="insertChar('ркн')">ркн</button>
  <button onclick="insertChar('рко')">рко</button>

  <button onclick="insertChar('ркп')">ркп</button>
  <button onclick="insertChar('рк░')">рк░</button>
  <button onclick="insertChar('рк▓')">рк▓</button>
  <button onclick="insertChar('рк╡')">рк╡</button>

  <button onclick="insertChar('рк╢')">рк╢</button>
  <button onclick="insertChar('рк╖')">рк╖</button>
  <button onclick="insertChar('рк╕')">рк╕</button>
  <button onclick="insertChar('рк╣')">рк╣</button>

  <!-- Conjuncts & Others -->
  <button onclick="insertChar('рк│')">рк│</button>
  <button onclick="insertChar('ркХрлНрк╖')">ркХрлНрк╖</button>
  <button onclick="insertChar('ркЬрлНркЮ')">ркЬрлНркЮ</button>
  <button onclick="insertChar('ркдрлНрк░')">ркдрлНрк░</button>

  <!-- Matras -->
  <button onclick="insertChar('рк╛')">рк╛</button>
  <button onclick="insertChar('рк┐')">рк┐</button>
  <button onclick="insertChar('рлА')">рлА</button>
  <button onclick="insertChar('рлБ')">рлБ</button>
  <button onclick="insertChar('рлВ')">рлВ</button>
  <button onclick="insertChar('рлЗ')">рлЗ</button>
  <button onclick="insertChar('рлИ')">рлИ</button>
  <button onclick="insertChar('рлЛ')">рлЛ</button>
  <button onclick="insertChar('рлМ')">рлМ</button>

  <!-- Special Characters -->
  <button onclick="insertChar('ркВ')">ркВ</button>
  <button onclick="insertChar('ркГ')">ркГ</button>
  <button onclick="insertChar('рлН')">рлН</button>
  <button onclick="insertChar('рлР')">рлР</button>

  <!-- Numbers -->
  <button onclick="insertChar('рлз')">рлз</button>
  <button onclick="insertChar('рли')">рли</button>
  <button onclick="insertChar('рлй')">рлй</button>
  <button onclick="insertChar('рлк')">рлк</button>
  <button onclick="insertChar('рлл')">рлл</button>
  <button onclick="insertChar('рлм')">рлм</button>
  <button onclick="insertChar('рлн')">рлн</button>
  <button onclick="insertChar('рло')">рло</button>
  <button onclick="insertChar('рлп')">рлп</button>
  <button onclick="insertChar('рлж')">рлж</button>

  <!-- Controls -->
  <button onclick="deleteLastChar()">тМл</button>
  <button onclick="insertChar(' ')">тРг</button>
</div>


  <!-- Hidden for SiGML -->
  <textarea class="txtaSiGMLText av0" style="display:none;"></textarea>

  <script>
    // Google Transliteration
    google.load("elements", "1", {
      packages: "transliteration"
    });

    google.setOnLoadCallback(() => {
      const options = {
        sourceLanguage: google.elements.transliteration.LanguageCode.ENGLISH,
        destinationLanguage: [google.elements.transliteration.LanguageCode.GUJARATI],
        transliterationEnabled: true
      };
      const control = new google.elements.transliteration.TransliterationControl(options);
      control.makeTransliteratable(["glossInput"]);
    });

    // Speech Recognition
    function startSpeechRecognition() {
      const micBtn = document.getElementById("micBtn");
      const glossInput = document.getElementById("glossInput");

      const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = "gu-IN";

      recognition.onstart = () => micBtn.innerText = "ЁЯОЩя╕П";
      recognition.onend = () => micBtn.innerText = "ЁЯОд";
      recognition.onerror = e => alert("Error: " + e.error);

      recognition.onresult = e => {
        glossInput.value = e.results[0][0].transcript;
      };

      recognition.start();
    }

    // Insert Gujarati character
    function insertChar(char) {
      const input = document.getElementById("glossInput");
      input.value += char;
    }

    function deleteLastChar() {
      const input = document.getElementById("glossInput");
      input.value = input.value.slice(0, -1);
    }

    // SiGML Trigger (Add your logic)
    document.getElementById("playBtn").addEventListener("click", () => {
      // Placeholder - connect to your SiGML logic
      alert("Send to SiGML: " + document.getElementById("glossInput").value);
    });

    document.addEventListener("DOMContentLoaded", function () {
      if (window.CWASA && typeof CWASA.init === "function") {
        CWASA.init();
      } else {
        console.error("CWASA is not loaded. Check allcsa.js path.");
      }
    });

    console.log("CWASA is", window.CWASA);
  </script>
</body>
</html>
